!function(){function a(a,b){request=new XMLHttpRequest,request.onreadystatechange=function(){4===request.readyState&&200===request.status&&b(request.responseText)},request.open("GET",a,!0),request.send()}function b(a,b){return Math.floor(Math.random()*(b-a+1)+a)}function c(a,b,c){return a.substr(0,b)+c+a.substr(b+1)}function d(){var b=H[Math.floor(Math.random()*H.length)];a("//api.soundcloud.com/resolve.json?url="+b+"&"+G,function(a){var b=JSON.parse(a);r.src=b.stream_url+"?"+G,r.play();var c=document.querySelector(".intro-music-title");c.setAttribute("href",b.permalink_url),c.innerHTML=b.title;var d=document.querySelector(".intro-music-user");d.setAttribute("href",b.user.permalink_url),d.innerHTML=b.user.username})}function e(){r=new Audio,r.crossOrigin="anonymous",s=new(window.AudioContext||window.webkitAudioContext),u=s.createMediaElementSource(r),u.connect(s.destination),t=s.createAnalyser(),t.smoothingTimeConstant=.1,t.fftSize=2048,u.connect(t),d(),t.connect(s.destination),v=new Uint8Array(t.frequencyBinCount),r.addEventListener("ended",function(){d()})}function f(){w=new THREE.Scene,y=new THREE.WebGLRenderer({alpha:!0,canvas:o}),y.setSize(j,i),z=new THREE.DirectionalLight(16777215,1),z.position.set(1,1,1),w.add(z),z=new THREE.DirectionalLight(16777215,1),z.position.set(-1,-1,1),w.add(z),C=new THREE.Object3D,D=[],E=[],F=b(0,I.length-1);for(var a=0;J>a;a++)D[a]=new THREE.Mesh(I[F],new THREE.MeshPhongMaterial({color:16777215,wireframe:!0})),D[a].position.y=100,E[a]=new THREE.Object3D,E[a].add(D[a]),E[a].rotation.z=a*(360/J)*Math.PI/180,C.add(E[a]);w.add(C),x=new THREE.PerspectiveCamera(75,j/i,.1,1e3),x.position.z=275,x.lookAt=C,w.add(x),A=new THREE.EffectComposer(y),A.addPass(new THREE.RenderPass(w,x)),B=new THREE.ShaderPass(THREE.RGBShiftShader),B.uniforms.amount.value=.05,B.renderToScreen=!0,A.addPass(B),y.render(w,x)}function g(){for(var a=0;J>a;a++){var b=v[a]/256*2.5+.01;D[a].scale.z=b,K&&(D[a].scale.x=b,D[a].scale.y=b)}C.rotation.z+=.01,K?TweenLite.to(B.uniforms.amount,1,{value:.005}):TweenLite.to(B.uniforms.amount,1,{value:m/2500}),t.getByteFrequencyData(v),y.render(w,x),A.render(),requestAnimationFrame(g)}for(var h,i=window.innerHeight,j=window.innerWidth,k=i/2,l=j/2,m=l,n=k,o=(document.querySelector(".intro"),document.querySelector(".intro-canvas")),p=(document.querySelector(".intro-canvas-overlay"),document.querySelectorAll(".intro-link")),q=0;q<p.length;q++)p[q].addEventListener("mouseover",function(){var a=this;h=setInterval(function(){var d=a.innerHTML.trim();a.innerHTML=c(d,b(0,d.length-1),String.fromCharCode(b(65,122)))},10)}),p[q].addEventListener("mouseout",function(){clearInterval(h);var a=this,b=a.getAttribute("data-text"),d=0,e=setInterval(function(){if(d<b.length){var f=a.innerHTML.trim();a.innerHTML=c(f,d,b[d])}else clearInterval(e);d++},10)});var r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G="client_id=78c6552c14b382e23be3bce2fc411a82",H=["https://soundcloud.com/theblackkeys/gold-on-the-ceiling","https://soundcloud.com/theheavyyy/like-me","https://soundcloud.com/fueled_by_ramen/paramore-aint-it-fun"],I=[new THREE.TetrahedronGeometry(50,0),new THREE.IcosahedronGeometry(40,0),new THREE.OctahedronGeometry(40,0),new THREE.DodecahedronGeometry(40,0)],J=100;window.addEventListener("resize",function(){i=window.innerHeight,j=window.innerWidth,x.aspect=j/i,x.updateProjectionMatrix(),y.setSize(j,i)}),window.addEventListener("mousemove",function(a){m=a.clientX-l,n=a.clientY-k});var K=!1;window.addEventListener("click",function(){if(K){for(var a=0;J>a;a++)TweenLite.to(D[a].scale,1,{x:1,y:1,z:1}),TweenLite.to(D[a].rotation,1,{x:0,y:0,z:0}),TweenLite.to(D[a].position,1,{x:0,y:100,z:0}),D[a].scale.z=v[a]/256*2.5+.01;K=!1}else{for(var a=0;J>a;a++)TweenLite.to(D[a].rotation,1,{x:b(0,Math.PI),y:b(0,Math.PI),z:b(0,Math.PI)}),TweenLite.to(D[a].position,1,{x:"+= "+b(0,1e3),y:"+= "+b(0,1e3),z:"+= "+b(-500,-250)});K=!0}}),e(),f(),g()}();