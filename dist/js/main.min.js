!function(){function a(a,b){request=new XMLHttpRequest,request.onreadystatechange=function(){4===request.readyState&&200===request.status&&b(request.responseText)},request.open("GET",a,!0),request.send()}function b(a,b){return Math.floor(Math.random()*(b-a+1)+a)}function c(a,b,c){return a.substr(0,b)+c+a.substr(b+1)}function d(){var b=C[Math.floor(Math.random()*C.length)];a("//api.soundcloud.com/resolve.json?url="+b+"&"+B,function(a){var b=JSON.parse(a);n.src=b.stream_url+"?"+B,n.play();var c=document.querySelector(".intro-music-title");c.setAttribute("href",b.permalink_url),c.innerHTML=b.title;var d=document.querySelector(".intro-music-user");d.setAttribute("href",b.user.permalink_url),d.innerHTML=b.user.username})}function e(){n=new Audio,n.crossOrigin="anonymous",o=new(window.AudioContext||window.webkitAudioContext),q=o.createMediaElementSource(n),q.connect(o.destination),p=o.createAnalyser(),p.smoothingTimeConstant=.1,p.fftSize=2048,q.connect(p),d(),p.connect(o.destination),r=new Uint8Array(p.frequencyBinCount),n.addEventListener("ended",function(){d()})}function f(){s=new THREE.Scene,t=new THREE.PerspectiveCamera(75,i/j,.1,1e3),t.position.z=250,s.add(t),u=new THREE.WebGLRenderer({alpha:!0,canvas:k}),u.setClearColor(16777215,0),u.setSize(i,j),v=new THREE.DirectionalLight(16777215,1),v.position.set(1,1,1),s.add(v),v=new THREE.DirectionalLight(16777215,1),v.position.set(-1,-1,1),s.add(v),y=new THREE.Object3D,z=[],A=[];for(var a=0;D>a;a++)z[a]=new THREE.Mesh(new THREE.TetrahedronGeometry(50,0),new THREE.MeshPhongMaterial({color:16777215})),z[a].position.y=100,A[a]=new THREE.Object3D,A[a].add(z[a]),A[a].rotation.z=a*(360/D)*Math.PI/180,y.add(A[a]);s.add(y),w=new THREE.EffectComposer(u),w.addPass(new THREE.RenderPass(s,t)),x=new THREE.ShaderPass(THREE.DotScreenShader),x.uniforms.scale.value=5,w.addPass(x),x=new THREE.ShaderPass(THREE.RGBShiftShader),x.uniforms.amount.value=.5,x.renderToScreen=!0,w.addPass(x),u.render(s,t)}function g(){for(var a=0;D>a;a++)z[a].scale.z=r[a]/256*2.5+.01;y.rotation.z+=.01,u.render(s,t),w.render(),p.getByteFrequencyData(r),requestAnimationFrame(g)}for(var h,i=window.innerWidth,j=window.innerHeight,k=(document.querySelector(".intro"),document.querySelector(".intro-canvas")),l=document.querySelectorAll(".intro-link"),m=0;m<l.length;m++)l[m].addEventListener("mouseover",function(){var a=this;h=setInterval(function(){var d=a.innerHTML.trim();a.innerHTML=c(d,b(0,d.length-1),String.fromCharCode(b(65,122)))},50)}),l[m].addEventListener("mouseout",function(){clearInterval(h);var a=this,b=a.getAttribute("data-text"),d=0,e=setInterval(function(){if(d<b.length){var f=a.innerHTML.trim();a.innerHTML=c(f,d,b[d])}else clearInterval(e);d++},50)});var n,o,p,q,r,s,t,u,v,w,x,y,z,A,B="client_id=78c6552c14b382e23be3bce2fc411a82",C=["https://soundcloud.com/ratatat/nightclub-amnesia","https://soundcloud.com/ratatat/abrasive","https://soundcloud.com/ratatat/cream-on-chrome","https://soundcloud.com/ratatat/one"],D=100;window.addEventListener("resize",function(){j=window.innerHeight,i=window.innerWidth,t.aspect=i/j,t.updateProjectionMatrix(),u.setSize(i,j)}),e(),f(),g()}();