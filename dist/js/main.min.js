document.addEventListener("DOMContentLoaded",function(){function a(a,b){return Math.floor(Math.random()*(b-a+1)+a)}function b(a,b,c){return a.substr(0,b)+c+a.substr(b+1)}function c(){l=new(window.AudioContext||window.webkitAudioContext),m=document.createElement("audio"),o=new XMLHttpRequest,o.open("GET","dist/music/black-cat.mp3",!0),o.responseType="blob",o.onload=function(a){n=document.createElement("source"),n.src=(window.URL||window.webkitURL||{}).createObjectURL(this.response),n.type="audio/mp3",m.appendChild(n)},o.send(),p=l.createMediaElementSource(m),q=l.createAnalyser(),q.smoothingTimeConstant=.25,q.fftSize=2048,p.connect(q),q.connect(l.destination),r=new Uint8Array(q.frequencyBinCount),m.play(),m.addEventListener("ended",function(){m.play()})}function d(){s=new THREE.Scene,t=new THREE.PerspectiveCamera(75,g/h,.1,1e3),t.position.z=250,s.add(t),u=new THREE.WebGLRenderer({alpha:!0,canvas:i}),u.setClearColor(16777215,0),u.setSize(g,h),v=new THREE.DirectionalLight(16777215,1),v.position.set(1,1,1),s.add(v),v=new THREE.DirectionalLight(16777215,1),v.position.set(-1,-1,1),s.add(v),y=new THREE.Object3D,z=[],A=[];for(var a=0;B>a;a++)z[a]=new THREE.Mesh(new THREE.TetrahedronGeometry(50,0),new THREE.MeshPhongMaterial({color:16777215})),z[a].position.y=100,A[a]=new THREE.Object3D,A[a].add(z[a]),A[a].rotation.z=a*(360/B)*Math.PI/180,y.add(A[a]);s.add(y),w=new THREE.EffectComposer(u),w.addPass(new THREE.RenderPass(s,t)),x=new THREE.ShaderPass(THREE.DotScreenShader),x.uniforms.scale.value=5,w.addPass(x),x=new THREE.ShaderPass(THREE.RGBShiftShader),x.uniforms.amount.value=.005,x.renderToScreen=!0,w.addPass(x),u.render(s,t)}function e(){for(var a=0;B>a;a++)z[a].scale.z=r[a]/256*2+.01;y.rotation.z+=.01,u.render(s,t),w.render(),q.getByteFrequencyData(r),requestAnimationFrame(e)}for(var f,g=window.innerWidth,h=window.innerHeight,i=(document.querySelector(".intro"),document.querySelector(".intro-canvas")),j=document.querySelectorAll(".intro-link"),k=0;k<j.length;k++)j[k].addEventListener("mouseover",function(){var c=this;f=setInterval(function(){var d=c.innerHTML.trim();c.innerHTML=b(d,a(0,d.length-1),String.fromCharCode(a(65,122)))},50)}),j[k].addEventListener("mouseout",function(){clearInterval(f);var a=this,c=a.getAttribute("data-text"),d=0,e=setInterval(function(){if(d<c.length){var f=a.innerHTML.trim();a.innerHTML=b(f,d,c[d])}else clearInterval(e);d++},50)});var l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B=100;window.addEventListener("resize",function(){h=window.innerHeight,g=window.innerWidth,t.aspect=g/h,t.updateProjectionMatrix(),u.setSize(g,h)}),function(){c(),d(),e()}()});
