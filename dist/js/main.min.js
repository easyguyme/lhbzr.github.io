!function(){"use strict";function a(a,b){var c=new XMLHttpRequest;c.onreadystatechange=function(){4===c.readyState&&200===c.status&&b(c)},c.open("GET",a,!0),c.send()}function b(a,b){return Math.floor(Math.random()*(b-a+1)+a)}function c(a,b,c){return a.substr(0,b)+c+a.substr(b+1)}function d(){var b=J[Math.floor(Math.random()*J.length)];a("//api.soundcloud.com/resolve.json?url="+b+"&"+I,function(a){var b=JSON.parse(a.responseText);t.src=b.stream_url+"?"+I,t.play();var c=document.querySelector(".music-title");c.setAttribute("href",b.permalink_url),c.innerHTML=b.title;var d=document.querySelector(".music-user");d.setAttribute("href",b.user.permalink_url),d.innerHTML=b.user.username})}function e(){t=new Audio,t.crossOrigin="anonymous",u=new(window.AudioContext||window.webkitAudioContext),w=u.createMediaElementSource(t),w.connect(u.destination),v=u.createAnalyser(),v.smoothingTimeConstant=.1,v.fftSize=2048,w.connect(v),d(),v.connect(u.destination),x=new Uint8Array(v.frequencyBinCount),t.addEventListener("ended",function(){d()})}function f(){y=new THREE.Scene,A=new THREE.WebGLRenderer({alpha:!0,canvas:K}),A.setSize(j,i),B=new THREE.DirectionalLight(16777215,1),B.position.set(1,1,1),y.add(B),B=new THREE.DirectionalLight(16777215,1),B.position.set(-1,-1,1),y.add(B),E=new THREE.Object3D,F=[],G=[],H=b(0,L.length-1);for(var a=0;M>a;a++)F[a]=new THREE.Mesh(L[H],new THREE.MeshPhongMaterial({color:16777215,wireframe:!0})),F[a].position.y=100,G[a]=new THREE.Object3D,G[a].add(F[a]),G[a].rotation.z=a*(360/M)*Math.PI/180,E.add(G[a]);y.add(E),z=new THREE.PerspectiveCamera(75,j/i,.1,1e3),z.position.z=275,z.lookAt=E,y.add(z),C=new THREE.EffectComposer(A),C.addPass(new THREE.RenderPass(y,z)),D=new THREE.ShaderPass(THREE.RGBShiftShader),D.uniforms.amount.value=.05,D.renderToScreen=!0,C.addPass(D),A.render(y,z)}function g(){for(var a=0;M>a;a++){var b=x[a]/256*2.5+.01;F[a].scale.z=b,N&&(F[a].scale.x=b,F[a].scale.y=b)}E.rotation.z+=.01,N?TweenLite.to(D.uniforms.amount,1,{value:.005}):TweenLite.to(D.uniforms.amount,1,{value:m/2500}),v.getByteFrequencyData(x),A.render(y,z),C.render(),requestAnimationFrame(g)}function h(){a("dist/img/sprites/sprites.svg",function(a){var b=document.createElement("div"),c=a.responseText;b.style.display="none",b.innerHTML=c.replace(/\n/g," "),document.body.insertBefore(b,document.body.childNodes[0])})}var i=window.innerHeight,j=window.innerWidth,k=i/2,l=j/2,m=l,n=k,o=document.querySelector(".about");o.addEventListener("mouseover",function(){TweenLite.to(o,.4,{background:"rgba(255, 255, 255, 0)",color:"rgb(255, 255, 255)"})}),o.addEventListener("mouseout",function(){TweenLite.to(o,.4,{background:"rgba(255, 255, 255, 1)",color:"rgb(0, 0, 0)"})}),o.style.top=b(100,i-400)+"px",o.style.left=b(0,j-500)+"px",Draggable.create(o,{bounds:document.querySelector("body"),type:"x, y"});var p,q=document.querySelectorAll(".menu-link");Draggable.create(q,{bounds:document.querySelector("body"),edgeResistance:1,type:"x, y",onClick:function(){location.href=this.target.getAttribute("data-href")}});for(var r=0;r<q.length;r++){var s=q[r];s.style.top=b(100,i-175)+"px",s.style.left=b(0,j-190)+"px",s.addEventListener("mouseover",function(){var a=this;p=setInterval(function(){var d=a.innerHTML.trim();a.innerHTML=c(d,b(0,d.length-1),String.fromCharCode(b(65,122)))},10),TweenLite.to(a,.4,{background:"rgba(255, 255, 255, 1)",color:"rgb(0, 0, 0)"})}),s.addEventListener("mouseout",function(){var a=this;clearInterval(p);var b=a.getAttribute("data-text"),d=0,e=setInterval(function(){if(d<b.length){var f=a.innerHTML.trim();a.innerHTML=c(f,d,b[d])}else clearInterval(e);d++},10);TweenLite.to(a,.4,{background:"rgba(255, 255, 255, 0)",color:"rgb(255, 255, 255)"})})}var t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I="client_id=78c6552c14b382e23be3bce2fc411a82",J=["https://soundcloud.com/theblackkeys/gold-on-the-ceiling","https://soundcloud.com/theheavyyy/like-me","https://soundcloud.com/fueled_by_ramen/paramore-aint-it-fun"],K=document.querySelector(".canvas"),L=[new THREE.TetrahedronGeometry(50,0),new THREE.IcosahedronGeometry(40,0),new THREE.OctahedronGeometry(40,0)],M=100;window.addEventListener("resize",function(){i=window.innerHeight,j=window.innerWidth,z.aspect=j/i,z.updateProjectionMatrix(),A.setSize(j,i)}),window.addEventListener("mousemove",function(a){m=a.clientX-l,n=a.clientY-k});var N=!1;window.addEventListener("click",function(){if(N){for(var a=0;M>a;a++)TweenLite.to(F[a].scale,1,{x:1,y:1,z:1}),TweenLite.to(F[a].rotation,1,{x:0,y:0,z:0}),TweenLite.to(F[a].position,1,{x:0,y:100,z:0}),F[a].scale.z=x[a]/256*2.5+.01;N=!1}else{for(var a=0;M>a;a++)TweenLite.to(F[a].rotation,1,{x:b(0,Math.PI),y:b(0,Math.PI),z:b(0,Math.PI)}),TweenLite.to(F[a].position,1,{x:"+= "+b(0,1e3),y:"+= "+b(0,1e3),z:"+= "+b(-500,-250)});N=!0}}),e(),f(),h(),g()}();