!function(){function a(a,b){s=new XMLHttpRequest,s.onreadystatechange=function(){4===s.readyState&&200===s.status&&b(s.responseText)},s.open("GET",a,!0),s.send()}function b(a,b){return Math.floor(Math.random()*(b-a+1)+a)}function c(a,b,c){return a.substr(0,b)+c+a.substr(b+1)}function d(){n=new Audio,n.crossOrigin="anonymous",o=new(window.AudioContext||window.webkitAudioContext),q=o.createMediaElementSource(n),q.connect(o.destination),p=o.createAnalyser(),p.smoothingTimeConstant=.1,p.fftSize=2048,q.connect(p),a("http://api.soundcloud.com/resolve.json?url="+D+"&"+C,function(a){var b=JSON.parse(a);n.src=b.stream_url+"?"+C,n.play();var c=document.querySelector(".intro-music-title");c.setAttribute("href",b.permalink_url),c.innerHTML=b.title;var d=document.querySelector(".intro-music-user");d.setAttribute("href",b.user.permalink_url),d.innerHTML=b.user.username}),p.connect(o.destination),r=new Uint8Array(p.frequencyBinCount),n.addEventListener("ended",function(){n.play()})}function e(){t=new THREE.Scene,u=new THREE.PerspectiveCamera(75,i/j,.1,1e3),u.position.z=250,t.add(u),v=new THREE.WebGLRenderer({alpha:!0,canvas:k}),v.setClearColor(16777215,0),v.setSize(i,j),w=new THREE.DirectionalLight(16777215,1),w.position.set(1,1,1),t.add(w),w=new THREE.DirectionalLight(16777215,1),w.position.set(-1,-1,1),t.add(w),z=new THREE.Object3D,A=[],B=[];for(var a=0;E>a;a++)A[a]=new THREE.Mesh(new THREE.TetrahedronGeometry(50,0),new THREE.MeshPhongMaterial({color:16777215})),A[a].position.y=100,B[a]=new THREE.Object3D,B[a].add(A[a]),B[a].rotation.z=a*(360/E)*Math.PI/180,z.add(B[a]);t.add(z),x=new THREE.EffectComposer(v),x.addPass(new THREE.RenderPass(t,u)),y=new THREE.ShaderPass(THREE.DotScreenShader),y.uniforms.scale.value=5,x.addPass(y),y=new THREE.ShaderPass(THREE.RGBShiftShader),y.uniforms.amount.value=.5,y.renderToScreen=!0,x.addPass(y),v.render(t,u)}function f(){for(var a=0;E>a;a++)A[a].scale.z=r[a]/256*2.5+.01;z.rotation.z+=.01,v.render(t,u),x.render(),p.getByteFrequencyData(r),requestAnimationFrame(f)}function g(){j=window.innerHeight,i=window.innerWidth,u.aspect=i/j,u.updateProjectionMatrix(),v.setSize(i,j)}for(var h,i=window.innerWidth,j=window.innerHeight,k=(document.querySelector(".intro"),document.querySelector(".intro-canvas")),l=document.querySelectorAll(".intro-link"),m=0;m<l.length;m++)l[m].addEventListener("mouseover",function(){var a=this;h=setInterval(function(){var d=a.innerHTML.trim();a.innerHTML=c(d,b(0,d.length-1),String.fromCharCode(b(65,122)))},50)}),l[m].addEventListener("mouseout",function(){clearInterval(h);var a=this,b=a.getAttribute("data-text"),d=0,e=setInterval(function(){if(d<b.length){var f=a.innerHTML.trim();a.innerHTML=c(f,d,b[d])}else clearInterval(e);d++},50)});var n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C="client_id=78c6552c14b382e23be3bce2fc411a82",D="https://soundcloud.com/theblackkeys/gold-on-the-ceiling",E=100;window.addEventListener("resize",g),d(),e(),f()}();