!function(){function a(a,b){request=new XMLHttpRequest,request.onreadystatechange=function(){4===request.readyState&&200===request.status&&b(request.responseText)},request.open("GET",a,!0),request.send()}function b(a,b){return Math.floor(Math.random()*(b-a+1)+a)}function c(a,b,c){return a.substr(0,b)+c+a.substr(b+1)}function d(){var b=G[Math.floor(Math.random()*G.length)];a("//api.soundcloud.com/resolve.json?url="+b+"&"+F,function(a){var b=JSON.parse(a);r.src=b.stream_url+"?"+F,r.play();var c=document.querySelector(".intro-music-title");c.setAttribute("href",b.permalink_url),c.innerHTML=b.title;var d=document.querySelector(".intro-music-user");d.setAttribute("href",b.user.permalink_url),d.innerHTML=b.user.username})}function e(){r=new Audio,r.crossOrigin="anonymous",s=new(window.AudioContext||window.webkitAudioContext),u=s.createMediaElementSource(r),u.connect(s.destination),t=s.createAnalyser(),t.smoothingTimeConstant=.1,t.fftSize=2048,u.connect(t),d(),t.connect(s.destination),v=new Uint8Array(t.frequencyBinCount),r.addEventListener("ended",function(){d()})}function f(){w=new THREE.Scene,y=new THREE.WebGLRenderer({alpha:!0,canvas:o}),y.setClearColor(16777215,0),y.setSize(j,i),z=new THREE.DirectionalLight(16777215,1),z.position.set(1,1,1),w.add(z),z=new THREE.DirectionalLight(16777215,1),z.position.set(-1,-1,1),w.add(z),C=new THREE.Object3D,D=[],E=[];for(var a=0;H>a;a++)D[a]=new THREE.Mesh(new THREE.TetrahedronGeometry(50,0),new THREE.MeshPhongMaterial({color:16777215})),D[a].position.y=100,E[a]=new THREE.Object3D,E[a].add(D[a]),E[a].rotation.z=a*(360/H)*Math.PI/180,C.add(E[a]);w.add(C),x=new THREE.PerspectiveCamera(75,j/i,.1,1e3),x.position.z=275,x.lookAt=C,w.add(x),A=new THREE.EffectComposer(y),A.addPass(new THREE.RenderPass(w,x)),B=new THREE.ShaderPass(THREE.DotScreenShader),B.uniforms.scale.value=5,A.addPass(B),B=new THREE.ShaderPass(THREE.RGBShiftShader),B.uniforms.amount.value=.5,B.renderToScreen=!0,A.addPass(B),y.render(w,x)}function g(){for(var a=0;H>a;a++)TweenLite.to(D[a].scale,.05,{z:v[a]/256*2.5+.01});C.rotation.z+=.01,TweenLite.to(x.rotation,.05,{x:n/1e4,y:m/2e4}),y.render(w,x),A.render(),t.getByteFrequencyData(v),requestAnimationFrame(g)}for(var h,i=window.innerHeight,j=window.innerWidth,k=i/2,l=j/2,m=l,n=k,o=(document.querySelector(".intro"),document.querySelector(".intro-canvas")),p=document.querySelectorAll(".intro-link"),q=0;q<p.length;q++)p[q].addEventListener("mouseover",function(){var a=this;h=setInterval(function(){var d=a.innerHTML.trim();a.innerHTML=c(d,b(0,d.length-1),String.fromCharCode(b(65,122)))},50)}),p[q].addEventListener("mouseout",function(){clearInterval(h);var a=this,b=a.getAttribute("data-text"),d=0,e=setInterval(function(){if(d<b.length){var f=a.innerHTML.trim();a.innerHTML=c(f,d,b[d])}else clearInterval(e);d++},50)});var r,s,t,u,v,w,x,y,z,A,B,C,D,E,F="client_id=78c6552c14b382e23be3bce2fc411a82",G=["https://soundcloud.com/theblackkeys/gold-on-the-ceiling"],H=100;window.addEventListener("resize",function(){i=window.innerHeight,j=window.innerWidth,x.aspect=j/i,x.updateProjectionMatrix(),y.setSize(j,i)}),window.addEventListener("mousemove",function(a){m=a.clientX-l,n=a.clientY-k,console.log("mouseX: "+m+", mouseY: "+n)}),e(),f(),g()}();